# JavaScriptå¤„ç†å™¨é›†æˆæ“ä½œæ€»ç»“

## âœ… å·²å®Œæˆçš„æ“ä½œ

### 1. åˆ›å»ºJavaScriptå¤„ç†å™¨æ–‡ä»¶
**æ–‡ä»¶ä½ç½®**: `XZVientiane/manifest/static/app/universal-links.js`

**åŠŸèƒ½ç‰¹ç‚¹**:
- é›†æˆåˆ°ç°æœ‰çš„ `wx.app.on` æ¡¥æ¥ç³»ç»Ÿ
- æ”¯æŒå¤šç§è·¯ç”±ç±»å‹ï¼ˆç”¨æˆ·ã€åœˆå­ã€å¸–å­ã€åˆ†äº«ç­‰ï¼‰
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œè°ƒè¯•æ—¥å¿—
- ä¸Nativeç«¯é€šä¿¡çš„å®Œæ•´å®ç°

### 2. é›†æˆåˆ°HTMLæ¨¡æ¿
**ä¿®æ”¹æ–‡ä»¶**: `XZVientiane/manifest/app.html`

**å…·ä½“ä¿®æ”¹**:
åœ¨ç¬¬41è¡Œæ·»åŠ äº†æ–°çš„scriptæ ‡ç­¾ï¼š
```html
<script src="static/app/universal-links.js"></script>
```

### 3. å·¥ä½œåŸç†

#### Nativeåˆ°JavaScriptçš„è°ƒç”¨é“¾ï¼š
```
1. AppDelegateæ¥æ”¶Universal Link
2. è§£æURLå¹¶å‘é€NotificationCenteré€šçŸ¥
3. XZWKWebViewBaseControlleræ¥æ”¶é€šçŸ¥
4. è°ƒç”¨JavaScriptæ¡¥æ¥æ–¹æ³•: handleUniversalLinkNavigation
5. universal-links.jså¤„ç†å…·ä½“çš„è·¯ç”±è·³è½¬
```

#### JavaScriptå¤„ç†å™¨ç‰¹ç‚¹ï¼š
- **ç­‰å¾…æœºåˆ¶**: ç­‰å¾…wx.appåˆå§‹åŒ–å®Œæˆåå†æ³¨å†Œå¤„ç†å™¨
- **è·¯ç”±è§£æ**: è‡ªåŠ¨è§£æURLè·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°
- **å¤šè·¯ç”±æ”¯æŒ**: æ”¯æŒuserã€circleã€postã€shareç­‰è·¯ç”±ç±»å‹
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·å’Œé”™è¯¯æŠ¥å‘Š
- **è°ƒè¯•å‹å¥½**: è¯¦ç»†çš„consoleæ—¥å¿—è¾“å‡º

## ğŸ”§ è‡ªå®šä¹‰è·¯ç”±æŒ‡å—

### æ·»åŠ æ–°çš„è·¯ç”±ç±»å‹
1. åœ¨ `handleUniversalLinkRoute` å‡½æ•°ä¸­æ·»åŠ æ–°çš„case
2. å®ç°å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼ˆå¦‚ `handleNewRoute`ï¼‰
3. å®ç°å…·ä½“çš„å¯¼èˆªå‡½æ•°ï¼ˆå¦‚ `navigateToNewPage`ï¼‰

### ä¿®æ”¹ç°æœ‰è·¯ç”±
æ ¹æ®ä½ çš„Appå®é™…é¡µé¢ç»“æ„ï¼Œä¿®æ”¹å¯¼èˆªå‡½æ•°ä¸­çš„URLè·¯å¾„ï¼š

```javascript
function navigateToUserDetail(userId, params) {
    // ä¿®æ”¹è¿™é‡Œçš„URLä»¥åŒ¹é…ä½ çš„Appè·¯ç”±è§„åˆ™
    const url = `user/detail?id=${userId}`;
    
    // ä½¿ç”¨é€‚åˆçš„å¯¼èˆªæ–¹æ³•
    if (typeof app !== 'undefined' && app.navigateTo) {
        app.navigateTo({ url: url });
        return true;
    }
    
    return false;
}
```

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. æ§åˆ¶å°è°ƒè¯•
åœ¨Safari Web Inspectorä¸­æŸ¥çœ‹è¯¦ç»†çš„å¤„ç†æ—¥å¿—

### 2. æµ‹è¯•URLç¤ºä¾‹
- `https://zaiju.com/app/home`
- `https://zaiju.com/app/user/123`
- `https://zaiju.com/app/circle/456?tab=posts`

### 3. éªŒè¯æ­¥éª¤
1. éƒ¨ç½²æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶
2. åœ¨Safariä¸­æµ‹è¯•Universal Links
3. æ£€æŸ¥Appæ˜¯å¦æ­£ç¡®æ‰“å¼€å¹¶è·³è½¬åˆ°ç›®æ ‡é¡µé¢
4. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ç¡®è®¤å¤„ç†æµç¨‹

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è·¯ç”±åŒ¹é…**: ç¡®ä¿JavaScriptä¸­çš„è·¯ç”±è§„åˆ™ä¸ä½ çš„H5åº”ç”¨è·¯ç”±ä¸€è‡´
2. **å‚æ•°ä¼ é€’**: URLæŸ¥è¯¢å‚æ•°ä¼šè‡ªåŠ¨è§£æå¹¶ä¼ é€’ç»™å¯¼èˆªå‡½æ•°
3. **é”™è¯¯å›é€€**: æ— æ³•è¯†åˆ«çš„è·¯ç”±ä¼šè‡ªåŠ¨å›é€€åˆ°é¦–é¡µ
4. **å¼‚æ­¥å¤„ç†**: æ‰€æœ‰è·¯ç”±è·³è½¬éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„

ç°åœ¨ä½ çš„Universal Links JavaScriptå¤„ç†å™¨å·²ç»å®Œå…¨é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•äº†ï¼