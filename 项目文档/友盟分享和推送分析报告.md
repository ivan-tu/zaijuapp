# åœ¨å±€App - å‹ç›Ÿåˆ†äº«å’Œæ¨é€åŠŸèƒ½åˆ†ææŠ¥å‘Š

## ğŸ“‹ åŠŸèƒ½ç°çŠ¶æ€»è§ˆ

### âœ… **å·²å®Œæˆé…ç½®**
- å‹ç›Ÿåˆ†äº«SDKé›†æˆ
- å‹ç›Ÿæ¨é€SDKé›†æˆ  
- å¾®ä¿¡SDKé›†æˆ
- JavaScriptæ¡¥æ¥æœºåˆ¶
- æ¨é€é€šçŸ¥æƒé™é…ç½®

### ğŸ”§ **éœ€è¦è¡¥å……çš„é…ç½®**
- æ¨é€è¯ä¹¦ä¸Šä¼ å‹ç›Ÿåå°
- ç”Ÿäº§ç¯å¢ƒæ¨é€è¯ä¹¦é…ç½®

---

## ğŸ”— å‹ç›Ÿåˆ†äº«åŠŸèƒ½åˆ†æ

### SDKé›†æˆçŠ¶æ€ âœ…
**Podfileé…ç½®**:
```ruby
pod 'UMShare/Core'                    # æ ¸å¿ƒåŠŸèƒ½
pod 'UMShare/UI'                      # UIç»„ä»¶  
pod 'UMShare/Social/ReducedWeChat'    # ç²¾ç®€ç‰ˆå¾®ä¿¡
pod 'UMShare/Social/ReducedQQ'        # ç²¾ç®€ç‰ˆQQ
pod 'UMShare/Social/ReducedSina'      # ç²¾ç®€ç‰ˆå¾®åš
pod 'UMShare/Social/AlipayShare'      # æ”¯ä»˜å®åˆ†äº«
pod 'UMShare/Social/DingDing'         # é’‰é’‰åˆ†äº«
```

### é…ç½®ä¿¡æ¯ âœ…
**æ¥æº**: `shareInfo.json`
```json
{
    "wxAppId": "wx10a321f7fbdd6023",
    "wxAppScret": "abd190e197f45636b62fb9c43a602fce",
    "qqAppId": "1106431358", 
    "qqAppScret": "ffCm7BmDsMstVWYG",
    "wbAppId": "2960264426",
    "wbAppScret": "78a8bfc08cd6435981e60e52c66dfe0a",
    "isWxShare": 1,
    "isQqShare": 1, 
    "isWbShare": 1
}
```

### AppDelegateé…ç½® âœ…
**å¾®ä¿¡SDKåˆå§‹åŒ–** (`AppDelegate.m:772-777`):
```objc
[UMSocialGlobal shareInstance].universalLinkDic = @{
    @(UMSocialPlatformType_WechatSession):@"https://zaiju.com/",
    @(UMSocialPlatformType_QQ):@""
};
[[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_WechatSession 
                                       appKey:[[PublicSettingModel sharedInstance] weiXin_AppID] 
                                    appSecret:[[PublicSettingModel sharedInstance] weiXin_AppSecret] 
                                  redirectURL:nil];
[WXApi registerApp:[[PublicSettingModel sharedInstance] weiXin_AppID] 
      universalLink:@"https://zaiju.com/"];
```

### JavaScriptæ¡¥æ¥ âœ…
**H5è°ƒç”¨æ–¹å¼**:
```javascript
webViewCall('share', {
    data: {
        // åˆ†äº«æ•°æ®
    },
    success: function(res) {},
    fail: function(err) {}
});
```

**Nativeå¤„ç†** (`CFJClientH5Controller.m:1707-1710`):
```objc
if ([function isEqualToString:@"share"]) {
    self.webviewBackCallBack = completion;
    [self shareContent:dataDic presentedVC:self];
}
```

---

## ğŸ“± å‹ç›Ÿæ¨é€åŠŸèƒ½åˆ†æ

### SDKé›†æˆçŠ¶æ€ âœ…
**Podfileé…ç½®**:
```ruby
pod 'UMPush'    # å‹ç›Ÿæ¨é€SDK
```

### æ¨é€é…ç½® âœ…
**Entitlementsé…ç½®**:
```xml
<key>aps-environment</key>
<string>development</string>  <!-- éœ€è¦ç”Ÿäº§ç¯å¢ƒæ—¶æ”¹ä¸ºproduction -->
```

**Info.plisté…ç½®**:
```xml
<key>UIBackgroundModes</key>
<array>
    <string>remote-notification</string>
</array>
```

### AppDelegateæ¨é€å¤„ç† âœ…
**åˆå§‹åŒ–ä»£ç ** (`AppDelegate.m:708-715`):
```objc
[UMessage registerForRemoteNotificationsWithLaunchOptions:nil 
                                                    Entity:nil 
                                         completionHandler:^(BOOL granted, NSError * _Nullable error) {
    if (granted) {
        NSLog(@"åœ¨å±€ å‹ç›Ÿæ¨é€æ³¨å†ŒæˆåŠŸ");
    } else {
        NSLog(@"åœ¨å±€ å‹ç›Ÿæ¨é€æ³¨å†Œå¤±è´¥: %@", error);
    }
}];
```

**é€šçŸ¥å¤„ç†æ–¹æ³•**:
- `didReceiveRemoteNotification` âœ…
- `userNotificationCenter:willPresentNotification` âœ…  
- `userNotificationCenter:didReceiveNotificationResponse` âœ…

### æ¨é€é…ç½®ä¿¡æ¯ âœ…
**æ¥æº**: `shareInfo.json`
```json
{
    "pushAppKey": "5db314c23fc195be40000ac6",
    "pushAppSecret": "deu4oni7intctmmp78u0degj92hcupao",
    "isPush": 1
}
```

---

## ğŸš¨ **éœ€è¦å®Œæˆçš„ä»»åŠ¡**

### 1. **æ¨é€è¯ä¹¦é…ç½®** ğŸ”´ é‡è¦
#### å½“å‰çŠ¶æ€ï¼š
- Entitlements: `development` ç¯å¢ƒ
- éœ€è¦ç”Ÿäº§ç¯å¢ƒè¯ä¹¦

#### éœ€è¦åšçš„ï¼š
1. **ç”Ÿæˆç”Ÿäº§æ¨é€è¯ä¹¦**:
   ```
   Apple Developer Console â†’ Certificates â†’ 
   Apple Push Notification service SSL (Production)
   ```

2. **ä¸Šä¼ è¯ä¹¦åˆ°å‹ç›Ÿåå°**:
   - ç™»å½•å‹ç›Ÿæ¨é€åå°
   - åº”ç”¨è®¾ç½® â†’ æ¨é€è®¾ç½®
   - ä¸Šä¼ ç”Ÿäº§ç¯å¢ƒè¯ä¹¦(.p12æ–‡ä»¶)

3. **ä¿®æ”¹Entitlements**:
   ```xml
   <key>aps-environment</key>
   <string>production</string>  <!-- æ”¹ä¸ºproduction -->
   ```

### 2. **URL Schemesé…ç½®æ£€æŸ¥** âœ… å·²å®Œæˆ
**Info.plistä¸­çš„é…ç½®**:
```xml
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>zaiju.com</string>      <!-- Appè‡ªå®šä¹‰ -->
        </array>
    </dict>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>wx71ed098c91349cdc</string>  <!-- å¾®ä¿¡å›è°ƒ -->
        </array>
    </dict>
</array>
```

### 3. **LSApplicationQueriesSchemesé…ç½®** âœ… å·²å®Œæˆ
**æ”¯æŒçš„ç¬¬ä¸‰æ–¹åº”ç”¨**:
- å¾®ä¿¡: `weixin`, `weixinULAPI`, `wechat`
- æ”¯ä»˜å®: `alipay`, `alipayauth`, `alipayshare`, `safepay`
- QQ: `mqq`, `mqqapi`, `mqqOpensdkSSoLogin`
- å¾®åš: `sinaweibo`, `weibosdk`

---

## ğŸ§ª **æµ‹è¯•æ¸…å•**

### åˆ†äº«åŠŸèƒ½æµ‹è¯•ï¼š
- [ ] å¾®ä¿¡å¥½å‹åˆ†äº«
- [ ] å¾®ä¿¡æœ‹å‹åœˆåˆ†äº«  
- [ ] QQå¥½å‹åˆ†äº«
- [ ] å¾®åšåˆ†äº«
- [ ] æ”¯ä»˜å®åˆ†äº«

### æ¨é€åŠŸèƒ½æµ‹è¯•ï¼š
- [ ] Appå‰å°æ¨é€æ¥æ”¶
- [ ] Appåå°æ¨é€æ¥æ”¶
- [ ] æ¨é€ç‚¹å‡»è·³è½¬
- [ ] Badgeæ•°å­—æ˜¾ç¤º

---

## ğŸ“ **æ•…éšœæ’é™¤æŒ‡å—**

### åˆ†äº«å¤±è´¥å¸¸è§åŸå› ï¼š
1. **å¾®ä¿¡åˆ†äº«å¤±è´¥**:
   - æ£€æŸ¥å¾®ä¿¡AppIDæ˜¯å¦æ­£ç¡®
   - ç¡®è®¤Universal Linké…ç½®æ­£ç¡®
   - éªŒè¯å¾®ä¿¡å¼€å‘è€…å¹³å°é…ç½®

2. **QQåˆ†äº«å¤±è´¥**:
   - æ£€æŸ¥QQ AppIDé…ç½®
   - ç¡®è®¤URL Schemesé…ç½®

### æ¨é€å¤±è´¥å¸¸è§åŸå› ï¼š
1. **æ¨é€ä¸åˆ°è¾¾**:
   - æ£€æŸ¥æ¨é€è¯ä¹¦æ˜¯å¦ä¸Šä¼ 
   - ç¡®è®¤Bundle IDåŒ¹é…
   - éªŒè¯å‹ç›ŸAppKeyé…ç½®

2. **æ¨é€æƒé™è¢«æ‹’ç»**:
   - å¼•å¯¼ç”¨æˆ·åˆ°è®¾ç½®ä¸­å¼€å¯é€šçŸ¥æƒé™

---

## ğŸ¯ **æ€»ç»“**

### å½“å‰çŠ¶æ€ï¼š
- **åˆ†äº«åŠŸèƒ½**: âœ… åŸºæœ¬å®Œæˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨
- **æ¨é€åŠŸèƒ½**: ğŸ”¶ åŸºç¡€é…ç½®å®Œæˆï¼Œéœ€è¦ä¸Šä¼ ç”Ÿäº§æ¨é€è¯ä¹¦

### ç«‹å³éœ€è¦åšçš„ï¼š
1. **ç”Ÿæˆå¹¶ä¸Šä¼ ç”Ÿäº§æ¨é€è¯ä¹¦åˆ°å‹ç›Ÿåå°**
2. **ä¿®æ”¹Entitlementsç¯å¢ƒä¸ºproduction**
3. **æµ‹è¯•æ¨é€åŠŸèƒ½æ˜¯å¦æ­£å¸¸**

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œåˆ†äº«å’Œæ¨é€åŠŸèƒ½å°†å®Œå…¨å¯ç”¨ï¼