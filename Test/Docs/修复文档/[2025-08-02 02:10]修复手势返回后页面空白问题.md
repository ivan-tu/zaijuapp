# ä¿®å¤æ‰‹åŠ¿è¿”å›åé¡µé¢ç©ºç™½é—®é¢˜

## é—®é¢˜æè¿°
- æ‰‹åŠ¿è¿”å›åˆ°Tabæ ¹é¡µé¢åï¼Œè™½ç„¶TabBaræ˜¾ç¤ºé—®é¢˜å·²è§£å†³ï¼Œä½†é¡µé¢å†…å®¹æ˜¾ç¤ºç©ºç™½
- ç”¨æˆ·åé¦ˆï¼š"æ‰‹åŠ¿æ¾å¼€åä¾æ—§æ²¡æœ‰æ˜¾ç¤ºä¸Šä¸€ä¸ªé¡µé¢çš„å†…å®¹ï¼Œæ˜¾ç¤ºäº†ä¸€ç‰‡ç©ºç™½ï¼"

## é—®é¢˜åŸå› 
åœ¨`XZWKWebViewBaseController.m`çš„`restoreWebViewStateAfterInteractiveTransition`æ–¹æ³•ä¸­ï¼Œæœ‰ä¸€æ®µä»£ç å°†WebViewä»çˆ¶è§†å›¾ç§»é™¤åé‡æ–°æ·»åŠ ï¼š

```objc
// ğŸ”§ æ–°å¢ï¼šå¼ºåˆ¶é‡æ–°æ¸²æŸ“é€šè¿‡ç§»é™¤å’Œé‡æ–°æ·»åŠ WebView
UIView *webViewSuperview = self.webView.superview;
CGRect webViewFrame = self.webView.frame;
[self.webView removeFromSuperview];
[webViewSuperview addSubview:self.webView];
self.webView.frame = webViewFrame;
```

è¿™ä¸ªæ“ä½œä¼šå¯¼è‡´WebViewçš„å†…å®¹ä¸¢å¤±ï¼Œæ˜¯é¡µé¢æ˜¾ç¤ºç©ºç™½çš„ç›´æ¥åŸå› ã€‚

## ä¿®å¤æ–¹æ¡ˆ

### 1. ç§»é™¤ç ´åæ€§çš„WebViewé‡æ–°æ·»åŠ æ“ä½œ
åœ¨`XZWKWebViewBaseController.m`ä¸­ï¼Œå°†ä¸Šè¿°ä»£ç æ›¿æ¢ä¸ºï¼š
```objc
// ğŸ”§ ä¿®å¤ï¼šç¡®ä¿WebViewåœ¨æ­£ç¡®çš„å±‚çº§
if (self.webView.superview) {
    [self.webView.superview bringSubviewToFront:self.webView];
}
```

### 2. å¢å¼ºWebViewå†…å®¹æ¢å¤ç­–ç•¥
åœ¨`XZNavigationController.m`çš„è½¬åœºåŠ¨ç”»å®Œæˆå›è°ƒä¸­ï¼Œæ·»åŠ `executePageReloadStrategies`è°ƒç”¨ï¼š
```objc
// ğŸ”§ æ–°å¢ï¼šæ‰§è¡Œé¡µé¢æ¢å¤ç­–ç•¥
if ([toVC respondsToSelector:@selector(executePageReloadStrategies)]) {
    SEL reloadSel = NSSelectorFromString(@"executePageReloadStrategies");
    NSMethodSignature *signature = [toVC methodSignatureForSelector:reloadSel];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    [invocation setTarget:toVC];
    [invocation setSelector:reloadSel];
    [invocation invoke];
    NSLog(@"åœ¨å±€Claude Code[é¡µé¢æ¢å¤]+æ‰§è¡Œé¡µé¢é‡è½½ç­–ç•¥");
}
```

## ä¿®æ”¹æ–‡ä»¶
- `XZVientiane/XZBase/BaseController/XZWKWebViewBaseController.m` - ç¬¬3956-3970è¡Œ
- `XZVientiane/XZBase/BaseController/XZNavigationController.m` - ç¬¬318-327è¡Œ

## æ•ˆæœ
- WebViewå†…å®¹ä¸ä¼šå› ä¸ºè§†å›¾æ“ä½œè€Œä¸¢å¤±
- æ‰‹åŠ¿è¿”å›å®Œæˆåä¼šæ‰§è¡Œå¤šç§é¡µé¢æ¢å¤ç­–ç•¥
- é¡µé¢å†…å®¹èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤º

## æµ‹è¯•è¦ç‚¹
1. ä»å†…é¡µæ‰‹åŠ¿è¿”å›åˆ°Tabæ ¹é¡µé¢ï¼Œæ£€æŸ¥é¡µé¢å†…å®¹æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
2. æ‰‹åŠ¿è¿”å›è¿‡ç¨‹ä¸­å–æ¶ˆï¼Œæ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸
3. å¤šæ¬¡å¿«é€Ÿæ‰‹åŠ¿è¿”å›ï¼Œç¡®ä¿ç¨³å®šæ€§