# ä¿®å¤æ‰‹åŠ¿è¿”å›æ—¶TabBaræå‰æ˜¾ç¤ºé—®é¢˜

## é—®é¢˜æè¿°
å½“ç”¨æˆ·ä»å†…é¡µï¼ˆhidesBottomBarWhenPushed=YESï¼‰é€šè¿‡æ‰‹åŠ¿è¿”å›åˆ°Tabæ ¹é¡µé¢ï¼ˆhidesBottomBarWhenPushed=NOï¼‰æ—¶ï¼ŒTabBarä¼šåœ¨æ‰‹åŠ¿åˆšå¼€å§‹å°±ç«‹å³æ˜¾ç¤ºåœ¨å†…é¡µä¸Šå±‚ï¼Œå¯¼è‡´è§†è§‰æ•ˆæœå¼‚å¸¸ã€‚

## é—®é¢˜åŸå› 
iOSç³»ç»Ÿçš„é»˜è®¤è¡Œä¸ºæ˜¯åœ¨`popViewControllerAnimated:`è¢«è°ƒç”¨æ—¶ç«‹å³æ›´æ–°TabBarçš„æ˜¾ç¤ºçŠ¶æ€ï¼Œè€Œä¸ä¼šç­‰å¾…è½¬åœºåŠ¨ç”»å®Œæˆã€‚è¿™å¯¼è‡´TabBaråœ¨è½¬åœºåŠ¨ç”»è¿˜æœªå¼€å§‹å°±å·²ç»æ˜¾ç¤ºã€‚

## è§£å†³æ–¹æ¡ˆ
ä½¿ç”¨é®ç½©è§†å›¾è¦†ç›–TabBarï¼Œé¿å…å…¶æå‰æ˜¾ç¤ºã€‚

### 1. åœ¨è½¬åœºåŠ¨ç”»å¼€å§‹æ—¶åˆ›å»ºé®ç½©è§†å›¾
åœ¨`animateDismissalWithContext:`æ–¹æ³•ä¸­ï¼Œå½“æ£€æµ‹åˆ°æ˜¯è¿”å›åˆ°Tabæ ¹é¡µé¢æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªé®ç½©è§†å›¾ï¼š

```objc
if (isReturningToTabRoot) {
    NSLog(@"åœ¨å±€Claude Code[è½¬åœºä¿®å¤]+æ£€æµ‹åˆ°è¿”å›Tabæ ¹é¡µé¢ï¼Œç‰¹æ®Šå¤„ç†é¿å…TabBaré”™ä½");
    
    // ğŸ”§ å…³é”®ä¿®å¤ï¼šä¸ºäº†é¿å…TabBaræå‰æ˜¾ç¤ºï¼Œæˆ‘ä»¬éœ€è¦ä¸´æ—¶åˆ›å»ºä¸€ä¸ªé®ç½©è§†å›¾
    // åˆ›å»ºä¸€ä¸ªå’ŒfromVC.viewç›¸åŒçš„é®ç½©è§†å›¾ï¼Œè¦†ç›–åœ¨TabBarä¸Šæ–¹
    UIView *tabBarMaskView = [[UIView alloc] initWithFrame:containerView.bounds];
    tabBarMaskView.backgroundColor = containerView.backgroundColor ?: [UIColor whiteColor];
    tabBarMaskView.tag = 99999; // ç‰¹æ®Šæ ‡è®°ä¾¿äºåç»­ç§»é™¤
    
    // å°†é®ç½©è§†å›¾æ’å…¥åˆ°containerViewä¸­ï¼Œä½äºfromVC.viewä¸‹æ–¹
    [containerView insertSubview:tabBarMaskView atIndex:0];
    
    // å¯¹äºTabæ ¹é¡µé¢ï¼Œä¸è¦å°†å…¶viewæ·»åŠ åˆ°containerView
    toVC.view.hidden = NO;
    toVC.view.alpha = 1.0;
}
```

### 2. è½¬åœºå®Œæˆåç§»é™¤é®ç½©è§†å›¾
åœ¨è½¬åœºåŠ¨ç”»å®Œæˆæ—¶ï¼Œç§»é™¤é®ç½©è§†å›¾ï¼š

```objc
// ğŸ”§ å…³é”®ä¿®å¤ï¼šç§»é™¤TabBaré®ç½©è§†å›¾
UIView *tabBarMaskView = [containerView viewWithTag:99999];
if (tabBarMaskView) {
    [tabBarMaskView removeFromSuperview];
    NSLog(@"åœ¨å±€Claude Code[è½¬åœºä¿®å¤]+ç§»é™¤TabBaré®ç½©è§†å›¾");
}
```

### 3. å¤„ç†è½¬åœºå–æ¶ˆçš„æƒ…å†µ
å¦‚æœç”¨æˆ·å–æ¶ˆæ‰‹åŠ¿è¿”å›ï¼Œä¹Ÿéœ€è¦ç§»é™¤é®ç½©è§†å›¾ï¼š

```objc
if (isReturningToTabRoot) {
    // Tabæ ¹é¡µé¢ä¿æŒåŸæ ·
    toVC.view.alpha = 1.0;
    
    // ğŸ”§ å…³é”®ä¿®å¤ï¼šè½¬åœºå–æ¶ˆæ—¶ä¹Ÿè¦ç§»é™¤TabBaré®ç½©è§†å›¾
    UIView *tabBarMaskView = [containerView viewWithTag:99999];
    if (tabBarMaskView) {
        [tabBarMaskView removeFromSuperview];
        NSLog(@"åœ¨å±€Claude Code[è½¬åœºä¿®å¤]+è½¬åœºå–æ¶ˆï¼Œç§»é™¤TabBaré®ç½©è§†å›¾");
    }
}
```

## ä¿®æ”¹ä½ç½®
- æ–‡ä»¶ï¼š`XZVientiane/XZBase/BaseController/XZNavigationController.m`
- æ–¹æ³•ï¼š`animateDismissalWithContext:` - å¤„ç†è¿”å›åŠ¨ç”»å’Œé®ç½©è§†å›¾

## æ•ˆæœ
ä¿®å¤åï¼Œæ‰‹åŠ¿è¿”å›æ—¶TabBarä¼šè¢«é®ç½©è§†å›¾è¦†ç›–ï¼Œä¸ä¼šæå‰æ˜¾ç¤ºåœ¨å†…é¡µä¸Šå±‚ã€‚è½¬åœºåŠ¨ç”»å®Œæˆåï¼Œé®ç½©è§†å›¾ä¼šè¢«ç§»é™¤ï¼ŒTabBaræ­£å¸¸æ˜¾ç¤ºï¼Œæä¾›äº†æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚