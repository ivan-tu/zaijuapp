# [2025-08-02 23:00]æ·»åŠ æ‰‹åŠ¿è¿”å›ç»ˆæä¿®å¤æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜ç°çŠ¶

ç»è¿‡å¤šæ¬¡ä¿®å¤ï¼Œæ‰‹åŠ¿è¿”å›æ—¶ï¼š
- âœ… JavaScriptç¯å¢ƒç¨³å®š
- âœ… é¡µé¢æ¢å¤ç­–ç•¥æ‰§è¡Œ
- âŒ ä½†é¡µé¢ä»ç„¶ç©ºç™½

## ğŸ” å…³é”®å‘ç°

ä»è§†å›¾è¯Šæ–­æ—¥å¿—å‘ç°ï¼š
```
åœ¨å±€Claude Code[è§†å›¾è¯Šæ–­]+WKContentView, frame: {{0, 0}, {414, 4783}}
```

**WKContentViewé«˜åº¦4783è¯´æ˜WebViewå†…éƒ¨ç¡®å®æœ‰å†…å®¹ï¼Œä½†æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼**

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ScrollViewçŠ¶æ€ä¿®å¤ï¼ˆç¬¬923-941è¡Œï¼‰
```objc
// ğŸ”§ å…³é”®ä¿®å¤ï¼šä¿®å¤WebViewçš„scrollViewçŠ¶æ€
if ([webView respondsToSelector:@selector(scrollView)]) {
    UIScrollView *scrollView = [webView valueForKey:@"scrollView"];
    if (scrollView) {
        NSLog(@"åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+ä¿®å¤scrollViewçŠ¶æ€");
        // é‡ç½®contentOffsetåˆ°é¡¶éƒ¨
        scrollView.contentOffset = CGPointZero;
        // å¼ºåˆ¶åˆ·æ–°scrollView
        [scrollView setNeedsLayout];
        [scrollView layoutIfNeeded];
        // è§¦å‘ä¸€ä¸ªå¾®å°çš„æ»šåŠ¨æ¥æ¿€æ´»æ¸²æŸ“
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
            scrollView.contentOffset = CGPointMake(0, 1);
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                scrollView.contentOffset = CGPointZero;
            });
        });
    }
}
```

### 2. ç»ˆæä¿®å¤æ–¹æ¡ˆï¼ˆç¬¬1015-1057è¡Œï¼‰
åœ¨æ‰€æœ‰ä¿®å¤å°è¯•ä¹‹åï¼Œæ£€æŸ¥é¡µé¢å†…å®¹æ˜¯å¦çœŸçš„å­˜åœ¨ï¼š

```objc
// ğŸ”§ ç»ˆæä¿®å¤æ–¹æ¡ˆï¼šå¦‚æœé¡µé¢ä»ç„¶ç©ºç™½ï¼Œå¼ºåˆ¶é‡æ–°åŠ è½½
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    // æ£€æŸ¥é¡µé¢æ˜¯å¦çœŸçš„æœ‰å†…å®¹
    NSString *checkContentJS = @"(function(){ return document.body ? document.body.innerHTML.length : 0; })()";
    
    // ... æ‰§è¡ŒJavaScriptæ£€æŸ¥å†…å®¹é•¿åº¦
    
    NSLog(@"åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+é¡µé¢å†…å®¹é•¿åº¦: %ld", (long)contentLength);
    
    // å¦‚æœé¡µé¢å†…å®¹ä¸ºç©ºæˆ–å¾ˆå°‘ï¼Œå¼ºåˆ¶é‡æ–°åŠ è½½
    if (contentLength < 100) {
        NSLog(@"åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+âš ï¸ æ£€æµ‹åˆ°é¡µé¢å†…å®¹ä¸ºç©ºï¼Œæ‰§è¡Œç»ˆæä¿®å¤æ–¹æ¡ˆ");
        
        // å¼ºåˆ¶é‡æ–°æ‰§è¡ŒdomainOperate
        if ([viewController respondsToSelector:@selector(domainOperate)]) {
            // ... è°ƒç”¨domainOperateé‡æ–°åŠ è½½é¡µé¢
            NSLog(@"åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+âœ… å·²å¼ºåˆ¶æ‰§è¡ŒdomainOperate");
        }
    }
});
```

## ğŸ“Š ä¿®å¤æ—¶åº

1. **0ç§’** - æ‰‹åŠ¿è¿”å›æ£€æµ‹
2. **1.2ç§’** - JavaScriptç¯å¢ƒæ£€æŸ¥
3. **1.5ç§’** - é¡µé¢æ¢å¤ç­–ç•¥æ‰§è¡Œ
4. **2.0ç§’** - æ£€æŸ¥é¡µé¢å†…å®¹
5. **å¦‚æœå†…å®¹ä¸ºç©º** - å¼ºåˆ¶é‡æ–°åŠ è½½é¡µé¢

## ğŸš€ æŠ€æœ¯ä¼˜åŠ¿

1. **ScrollViewä¿®å¤**ï¼šè§£å†³WebViewæ¸²æŸ“é—®é¢˜
2. **å†…å®¹æ£€æµ‹**ï¼šæ™ºèƒ½åˆ¤æ–­é¡µé¢æ˜¯å¦çœŸçš„ç©ºç™½
3. **ç»ˆææ–¹æ¡ˆ**ï¼šå¼ºåˆ¶é‡æ–°åŠ è½½ï¼Œç¡®ä¿é¡µé¢æ˜¾ç¤º

## âš ï¸ é‡è¦æç¤º

è¿™æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„ä¿®å¤æ–¹æ¡ˆï¼š
1. å…ˆå°è¯•ä¿®å¤ScrollViewçŠ¶æ€
2. å¦‚æœä»ç„¶å¤±è´¥ï¼Œæ£€æŸ¥å®é™…å†…å®¹
3. å†…å®¹ä¸ºç©ºæ—¶å¼ºåˆ¶é‡æ–°åŠ è½½

## ğŸ”¬ éªŒè¯æ—¥å¿—

ä¿®å¤ç”Ÿæ•ˆååº”è¯¥çœ‹åˆ°ï¼š
```
åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+ä¿®å¤scrollViewçŠ¶æ€
åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+é¡µé¢å†…å®¹é•¿åº¦: [æ•°å­—]
```

å¦‚æœå†…å®¹ä¸ºç©ºï¼Œä¼šçœ‹åˆ°ï¼š
```
åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+âš ï¸ æ£€æµ‹åˆ°é¡µé¢å†…å®¹ä¸ºç©ºï¼Œæ‰§è¡Œç»ˆæä¿®å¤æ–¹æ¡ˆ
åœ¨å±€Claude Code[æ‰‹åŠ¿è¯Šæ–­]+âœ… å·²å¼ºåˆ¶æ‰§è¡ŒdomainOperate
```

## ğŸ“ æ€»ç»“

è¿™ä¸ªç»ˆæä¿®å¤æ–¹æ¡ˆç¡®ä¿äº†å³ä½¿æ‰€æœ‰å¸¸è§„ä¿®å¤éƒ½å¤±è´¥ï¼Œä¹Ÿèƒ½é€šè¿‡å¼ºåˆ¶é‡æ–°åŠ è½½æ¥æ¢å¤é¡µé¢æ˜¾ç¤ºã€‚è¿™æ˜¯ä¸€ä¸ªå…œåº•æ–¹æ¡ˆï¼Œä¿è¯ç”¨æˆ·ä¸€å®šèƒ½çœ‹åˆ°å†…å®¹ã€‚